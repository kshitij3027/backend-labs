# Log Processing Pipeline â€” Central Configuration
# Each component reads its own section.
# Environment variables can override values (see .env.example).

generator:
  log_file: /logs/app.log
  rate: 10                    # lines per second
  format: multi               # apache | nginx | syslog | json | multi

collector:
  source_file: /logs/app.log
  output_dir: /data/collected
  poll_interval: 2            # seconds
  batch_size: 100             # max lines per batch file
  state_file: /data/collected/.collector_state.json
  filters: []                 # raw line filters, e.g.:
  # - pattern: "health_check"
  #   action: exclude
  # - pattern: "CRITICAL"
  #   action: include

parser:
  input_dir: /data/collected
  output_dir: /data/parsed
  poll_interval: 2            # seconds
  state_file: /data/parsed/.parser_state.json
  filters: []                 # parsed entry filters, e.g.:
  # - field: level
  #   pattern: "DEBUG"
  #   action: exclude
  # - field: status_code
  #   pattern: "^5\\d{2}$"
  #   action: include

storage:
  input_dir: /data/parsed
  storage_dir: /data/storage
  poll_interval: 2            # seconds
  rotation_size_mb: 5         # rotate active file when it exceeds this size
  rotation_hours: 24          # rotate active file after this many hours
  state_file: /data/storage/.storage_state.json
  compression_enabled: true   # gzip archive files after rotation

query:
  storage_dir: /data/storage
